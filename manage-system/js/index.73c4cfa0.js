var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,i=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&a(e,r,t[r]);if(s)for(var r of s(t))n.call(t,r)&&a(e,r,t[r]);return e},l=(e,s)=>t(e,r(s)),c=(e,t)=>{var r={};for(var a in e)o.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&s)for(var a of s(e))t.indexOf(a)<0&&n.call(e,a)&&(r[a]=e[a]);return r};import{r as d,j as u,a as p,b as m,u as x,c as h,q as f,h as g,d as y,e as j,_ as w,S as v,U as b,M as C,C as k,L as I,D as _,f as R,A as S,g as P,i as N,k as E,m as q,P as O,l as T,n as L,B as M,o as A,R as $,p as U,F,s as K,I as z,t as B,v as D,w as H,x as V,y as W,z as G,E as Z,G as J,H as Y,J as Q,T as X,K as ee,N as te,O as re,Q as se,V as oe,W as ne,X as ae,Y as ie,Z as le,$ as ce,a0 as de,a1 as ue,a2 as pe}from"./vendor.a4213b2b.js";const me=undefined;(function e(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();var xe={default:{},local:{baseURL:"/api"},prod:{baseURL:"/api"}};const he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fe=i(i({},xe.default||{}),xe[he.__app_mode__||"prod"]||{});he.__app_mode__;const ge=d.exports.createContext(null),ye=({value:e={},children:t})=>{const[r,s]=d.exports.useState(e),o=(e={})=>{s(i(i({},r),e))};return u.exports.jsx(ge.Provider,{value:[r,o],children:t})},je=()=>{const e=undefined;return d.exports.useContext(ge)},we={},ve={default:p.create(we)};function be(e){if(e){if(ve[e])return ve;ve[e]=p.create(we)}return ve}const Ce=async function(e){try{const t=e.instanceName?e.instanceName:"default",r=be()[t];if("function"!=typeof r)throw new Error(`unknown ${t} in request method`);const s=await r(e);return r.defaults.withFullResponse||e.withFullResponse?s:s.data}catch(t){throw console.error(t),t}};function ke(e,t={}){const r=x(e,i({manual:!0,requestMethod:Ce},t)),{run:s}=r,o=c(r,["run"]);return i({request:s},o)}m.forEach(["delete","get","head","options"],(function e(t){Ce[t]=function(e,r){return Ce(m.merge(r||{},{method:t,url:e}))}})),m.forEach(["post","put","patch"],(function e(t){Ce[t]=function(e,r,s){return Ce(m.merge(s||{},{method:t,url:e,data:r}))}})),Ce.CancelToken=p.CancelToken,Ce.isCancel=p.isCancel;const Ie=(e,t)=>`${e.toString()}\n\nThis is located at:${t}`,_e={display:"flex",flexDirection:"column",alignItems:"center",margin:"100px 0",color:"#ed3131"},Re=({componentStack:e,error:t})=>u.exports.jsxs("div",{style:_e,title:Ie(t,e),children:[u.exports.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"843",width:"60",height:"60",children:[u.exports.jsx("path",{d:"M1024 512C1024 229.23 794.77 0 512 0S0 229.23 0 512s229.23 512 512 512c117.41 0 228.826-39.669 318.768-111.313 10.79-8.595 12.569-24.308 3.975-35.097-8.594-10.789-24.308-12.568-35.097-3.974C718.47 938.277 618.002 974.049 512 974.049 256.818 974.049 49.951 767.182 49.951 512S256.818 49.951 512 49.951 974.049 256.818 974.049 512c0 87.493-24.334 171.337-69.578 243.96-7.294 11.708-3.716 27.112 7.992 34.405 11.707 7.294 27.11 3.716 34.405-7.991C997.014 701.88 1024 608.898 1024 512z","p-id":"844",fill:"#cdcdcd"}),u.exports.jsx("path",{d:"M337.17 499.512c34.485 0 62.44-27.955 62.44-62.439s-27.955-62.439-62.44-62.439c-34.483 0-62.438 27.955-62.438 62.44 0 34.483 27.955 62.438 62.439 62.438z m374.635 0c34.484 0 62.439-27.955 62.439-62.439s-27.955-62.439-62.44-62.439c-34.483 0-62.438 27.955-62.438 62.44 0 34.483 27.955 62.438 62.439 62.438zM352.788 704.785c43.377-34.702 100.364-55.425 171.7-55.425 71.336 0 128.322 20.723 171.7 55.425 26.513 21.21 42.695 42.786 50.444 58.284 6.168 12.337 1.168 27.34-11.17 33.508-12.337 6.169-27.34 1.168-33.508-11.17-0.918-1.834-3.462-6.024-7.788-11.793-7.564-10.084-17.239-20.269-29.183-29.824-34.671-27.737-80.71-44.478-140.495-44.478-59.786 0-105.824 16.74-140.496 44.478-11.944 9.555-21.619 19.74-29.182 29.824-4.327 5.769-6.87 9.959-7.788 11.794-6.169 12.337-21.171 17.338-33.509 11.17-12.337-6.17-17.338-21.172-11.169-33.509 7.75-15.498 23.931-37.074 50.444-58.284z","p-id":"845",fill:"#cdcdcd"})]}),u.exports.jsx("h3",{children:"Oops! Something went wrong."})]});class Se extends d.exports.Component{constructor(e){super(e),this.state={error:null,info:{componentStack:""}}}componentDidCatch(e,t){const{onError:r}=this.props;if("function"==typeof r)try{r.call(this,e,t.componentStack)}catch(s){}this.setState({error:e,info:t})}render(){const{children:e,Fallback:t}=this.props,{error:r,info:s}=this.state;return null!==r&&"function"==typeof t?u.exports.jsx(t,{componentStack:s&&s.componentStack,error:r}):e||null}}Se.defaultProps={Fallback:Re},h({useEffect:d.exports.useEffect});var Pe="";const Ne=({appConfig:e})=>{if(e.request){const{request:t={}}=e;if("[object Array]"===Object.prototype.toString.call(t))t.forEach((e=>{const t=e.instanceName?e.instanceName:"default";if(t){const r=undefined;Ee(e,be(t)[t])}}));else{const e=undefined;Ee(t,be().default)}}};function Ee(e,t){const r=e,{interceptors:s={}}=r,o=c(r,["interceptors"]);Object.keys(o).forEach((e=>{t.defaults[e]=o[e]})),s.request&&t.interceptors.request.use(s.request.onConfig||function(e){return e},s.request.onError||function(e){return Promise.reject(e)}),s.response&&t.interceptors.response.use(s.response.onConfig||function(e){return e},s.response.onError||function(e){return Promise.reject(e)})}function qe(e){Ne({appConfig:e})}var Oe=({appConfig:e,wrapperPageComponent:t,buildConfig:r,context:s,applyRuntimeAPI:o,getRuntimeValue:n,addProvider:a})=>{const{app:i={}}=e,{ErrorBoundaryFallback:l,onErrorBoundaryHandler:c,renderComponent:d,addProvider:u}=i;u&&a(u);const{parseSearchParams:p=!0}=i;p&&t(Te(o)),t(Me()),t(Le(l,c)),n("enableRouter")};function Te(e){const t=undefined;return t=>{const{pageConfig:r}=t,s=undefined;return s=>{const o=e("getSearchParams");return u.exports.jsx(t,i({},Object.assign({},s,{searchParams:o,pageConfig:r})))}}}function Le(e,t){const r=undefined;return r=>{const{pageConfig:s={}}=r,o=undefined;return o=>s.errorBoundary?u.exports.jsx(Se,{Fallback:e,onError:t,children:u.exports.jsx(r,i({},o))}):u.exports.jsx(r,i({},o))}}function Me(){const e=undefined;return e=>{const{pageConfig:t}=e,{title:r,scrollToTop:s}=t||{},o=undefined;return t=>{const[o,n]=d.exports.useState(window.__ICE_PAGE_PROPS__);return d.exports.useEffect((()=>{r&&(document.title=r),s&&window.scrollTo(0,0),window.__ICE_PAGE_PROPS__?window.__ICE_PAGE_PROPS__=null:e.getInitialProps&&(async()=>{const{href:t,origin:r,pathname:s,search:o}=window.location,a=undefined,i=undefined,l=undefined,c={pathname:s,path:t.replace(r,""),query:f.parse(o),ssrError:window.__ICE_SSR_ERROR__},d=await e.getInitialProps(c);n(d)})()}),[]),u.exports.jsx(e,i({},Object.assign({},t,o)))}}}const Ae=()=>Ce({url:"/loginUserInfo",method:"get",instanceName:"loginRequest"}),$e=e=>Ce({url:"/switchRole",method:"get",params:e,withFullResponse:!0,instanceName:"loginRequest"}),Ue=()=>Ce({url:"/logout",method:"get",instanceName:"loginRequest"}),Fe=e=>Ce({url:"/sys/updatePwd",method:"put",data:e});var Ke;const ze=undefined;var Be=y({user:{state:{userInfo:null},reducers:{update:(e,t)=>i({},t)},effects:e=>({async getUserInfo(){var t,r;const s=undefined;if(!localStorage.getItem("jwt"))return void(null==(r=g)||r.replace({pathname:"/login",search:`redirect=${null==(t=g)?void 0:t.location.pathname}`}));const{data:o}=await Ae(),{nickName:n,userName:a,currentMenuList:i,id:l,currentRole:c,roles:d}=o;e.user.update({userInfo:{nickName:n,userName:a,menuList:i,userId:l,currentRole:c,roles:d}})}})}});function De(){const[e,t]=Be.useModel("user"),{userInfo:r}=e,{nickName:s,userName:o,currentRole:n,roles:a}=r||{},[i,l]=d.exports.useState(!1),[c,p]=d.exports.useState(!1),[m,x]=d.exports.useState(""),h=j(),f=async()=>{const{pathname:e}=h.location;"/login"!==window.location.pathname&&h.replace({pathname:"/login",search:JSON.stringify({redirect:e})}),await Ue(),localStorage.clear()},g=e=>{const{key:t}=e;switch(t){case"logout":f();break;case"changeRole":l(!0);break;case"settings":p(!0)}},{loading:y,request:L}=ke($e,{onSuccess:e=>{const{jwt:r}=e.headers;localStorage.setItem("jwt",r),l(!1),t.getUserInfo()}}),M=()=>{m&&m!==(null==n?void 0:n.id)?L({roleId:m}):A()},A=()=>{setTimeout((()=>l(!1)))},$=u.exports.jsxs(w,{selectedKeys:[],onClick:g,children:[u.exports.jsxs(w.Item,{children:[u.exports.jsx(v,{}),u.exports.jsx("span",{className:"ml10",children:"\u4fee\u6539\u5bc6\u7801"})]},"settings"),(null==a?void 0:a.length)>1?u.exports.jsxs(w.Item,{children:[u.exports.jsx(b,{}),u.exports.jsx("span",{className:"ml10",children:"\u5207\u6362\u89d2\u8272"}),u.exports.jsx(C,{title:"\u5207\u6362\u89d2\u8272",visible:i,destroyOnClose:!0,onCancel:A,onOk:M,confirmLoading:y,children:u.exports.jsx(k.Group,{size:"small",onChange:e=>{x(e)},defaultValue:n.id,children:a.map((e=>u.exports.jsx(k,{title:e.roleName,description:e.remark,value:e.id},e.id)))})})]},"changeRole"):"",u.exports.jsx(w.Divider,{}),u.exports.jsxs(w.Item,{children:[u.exports.jsx(I,{}),u.exports.jsx("span",{className:"ml10",children:"\u9000\u51fa\u767b\u5f55"})]},"logout")]});return u.exports.jsxs(u.exports.Fragment,{children:[u.exports.jsx(_,{overlay:$,children:u.exports.jsxs(R,{className:"hand",children:[u.exports.jsx(S,{shape:"square",size:"small",icon:u.exports.jsx(P,{})}),u.exports.jsx("span",{children:s||o}),u.exports.jsxs("span",{children:["(",null==n?void 0:n.roleName,")"]}),u.exports.jsx(N,{})]})}),u.exports.jsxs(E,{title:"\u4fee\u6539\u5bc6\u7801",autoFocusFirstInput:!0,visible:c,width:400,modalProps:{destroyOnClose:!0,maskClosable:!1,onCancel:()=>p(!1)},onFinish:async e=>{const{newPwd:t,oldPwd:r}=e;await Fe({newPwd:t,oldPwd:r}),q.success("\u4fee\u6539\u6210\u529f"),f()},children:[u.exports.jsx(O.Password,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u539f\u59cb\u5bc6\u7801"}],name:"oldPwd",label:"\u539f\u5bc6\u7801"}),u.exports.jsx(O.Password,{name:"newPwd",label:"\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u539f\u59cb\u5bc6\u7801"},{pattern:/^(\w){6,20}$/,message:"\u5bc6\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"}]}),u.exports.jsx(T,{name:["newPwd"],children:({newPwd:e})=>u.exports.jsx(O.Password,{name:"comfirmPW",label:"\u786e\u8ba4\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u539f\u59cb\u5bc6\u7801"},{validator:(t,r)=>r!==e?Promise.reject(new Error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")):Promise.resolve()}]})})]})]})}var He={ControlOutlined:L};const Ve=e=>null==e?void 0:e.map((({name:e,children:t,url:r,icon:s})=>({path:r,key:r,name:e,icon:s&&He[s]&&d.exports.createElement(He[s]),children:t&&Ve(t)})));function We({children:e,history:t}){const[r,s]=Be.useModel("user"),{userInfo:o}=r;return d.exports.useEffect((()=>{s.getUserInfo()}),[s]),u.exports.jsx(M,{title:"\u7ba1\u7406\u5e73\u53f0",style:{minHeight:"100vh"},location:{pathname:t.location.pathname},menuDataRender:()=>Ve(null==o?void 0:o.menuList),menuItemRender:(e,t)=>e.path?u.exports.jsx(A,{to:e.path,children:t}):t,rightContentRender:()=>u.exports.jsx(De,{}),children:u.exports.jsx("div",{style:{minHeight:"60vh",height:"100%"},children:e})})}function Ge({history:e}){const[t]=Be.useModel("user"),{menuList:r}=(null==t?void 0:t.userInfo)||{};return d.exports.useEffect((()=>{r&&e.replace(r[0].url)}),[r,e]),u.exports.jsx("div",{children:"home"})}const Ze=undefined,Je=undefined,Ye=undefined,Qe=undefined;var Xe="_login-x_4px6w_1",et="_login-content_4px6w_8",tt="_title_4px6w_28",rt="_sub-title_4px6w_38",st="_login-form_4px6w_46",ot="_form-box_4px6w_49",nt="_ant-form-item-label_4px6w_55",at="_verify-x_4px6w_58",it="_code-x_4px6w_63",lt="_ant-space-item_4px6w_66",ct="_ant-input_4px6w_69",dt="_ant-input-affix-wrapper_4px6w_73",ut="_sub-x_4px6w_77";const pt=e=>Ce({url:"/login",method:"post",data:e,withFullResponse:!0,instanceName:"loginRequest"}),mt=()=>Ce({url:"/captchaImage",method:"get",instanceName:"loginRequest"});function xt(){const[e]=F.useForm(),t=j(),{data:r,refresh:s}=ke(mt,{manual:!1}),{uuid:o,img:n}=r||{},a=e=>pt(l(i({},e),{uuid:o})),{loading:c,request:d}=ke(a,{onSuccess:e=>{if(0===e.data.code){const{jwt:r}=e.headers;localStorage.setItem("jwt",r);const{redirect:s}=K();s&&"/login"!==s?t.push(s):t.push("/")}else s()}}),p=async(e,t)=>t?/^[A-Za-z0-9]{3,4}$/.test(t)?Promise.resolve():Promise.reject(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801")):Promise.reject(new Error("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"));return u.exports.jsx("div",{className:Xe,children:u.exports.jsx("div",{className:et,children:u.exports.jsxs("div",{className:st,children:[u.exports.jsx("div",{className:tt,children:"\u7ba1\u7406\u5e73\u53f0"}),u.exports.jsxs(F,{form:e,className:ot,onFinish:d,validateTrigger:"onBlur",initialValues:{rememberMe:!1},children:[u.exports.jsx("div",{className:rt,children:"\u8d26\u53f7\u5bc6\u7801\u767b\u5f55"}),u.exports.jsx(F.Item,{name:"account",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"}],children:u.exports.jsx(z,{autoComplete:"username",prefix:u.exports.jsx(P,{}),placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7"})}),u.exports.jsx(F.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:u.exports.jsx(z,{prefix:u.exports.jsx(B,{}),type:"password",autoComplete:"current-password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),u.exports.jsx(F.Item,{children:u.exports.jsxs(R,{className:it,children:[u.exports.jsx(F.Item,{name:"captcha",noStyle:!0,rules:[{validator:p}],children:u.exports.jsx(z,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"})}),n&&u.exports.jsx("img",{className:at,onClick:s,src:`data:image/jpg;base64,${n}`})]})}),u.exports.jsx(F.Item,{name:"rememberMe",valuePropName:"checked",children:u.exports.jsx(D,{children:"\u8bb0\u4f4f\u6211\u4e00\u5468"})}),u.exports.jsx(U,{type:"primary",loading:c,block:!0,htmlType:"submit",className:ut,children:c?"\u767b\u5f55\u4e2d...":"\u767b\u5f55"})]})]})})})}const ht=undefined,ft=e=>Ce({url:"/sys/getSysModuleList",method:"get",params:e}),gt=e=>Ce({url:"/sys/addOrUpdateSysModule",method:"post",data:e}),yt=e=>Ce({url:"/sys/deleteSysModule",method:"delete",params:e}),jt=e=>Ce({url:"/sys/getSysResourceList",method:"get",params:e}),wt=e=>Ce({url:"/sys/addSysResource",method:"post",data:{sysResourceList:[e]}}),vt=e=>Ce({url:"/sys/updateSysResource",method:"put",data:e}),bt=e=>Ce({url:"/sys/getSysRoleList",method:"get",params:e}),Ct=e=>Ce({url:"/sys/addOrUpdateSysRole",method:"post",data:e}),kt=e=>Ce({url:"/sys/deleteSysRole",method:"delete",params:e}),It=()=>Ce({url:"/sys/getMenuTree",method:"get"}),_t=e=>Ce({url:"/sys/updateMenu",method:"put",data:e}),Rt=e=>Ce({url:"/sys/batchAddMenus",method:"post",data:e}),St=e=>Ce({url:"/sys/deleteMenus",method:"delete",params:e}),Pt=e=>Ce({url:"/sys/deleteSysResource",method:"delete",params:e}),Nt=e=>Ce({url:"/sys/distributeMenus",method:"post",data:e}),Et=e=>Ce({url:"/sys/distributeInterfaces",method:"post",data:e}),qt=e=>Ce({url:"/sys/getUserList",method:"get",params:e}),Ot=e=>Ce({url:"/register",method:"post",data:e}),Tt=e=>Ce({url:"/sys/updateUser",method:"put",data:e}),Lt=e=>Ce({url:"/sys/deleteUser",method:"delete",params:e}),Mt=e=>Ce({url:"/sys/resetPwd",method:"get",params:e}),At=(e,t)=>u.exports.jsx(A,{to:{pathname:`/system/auth/${t.id}`,search:`moduleName=${t.moduleName}\u6a21\u5757`},children:e},"link"),$t=[{title:"\u6743\u9650\u540d\u79f0",dataIndex:"moduleName",render:At,formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]})},{title:"\u6743\u9650\u72b6\u6001",dataIndex:"status",search:!1,valueEnum:{0:{text:"\u505c\u7528",status:"Error"},1:{text:"\u6b63\u5e38",status:"Success"}}},{title:"\u64cd\u4f5c",valueType:"option",dataIndex:"option",width:250,render:(e,t,r,s)=>[u.exports.jsx("a",{onClick:()=>{var e;null==(e=null==s?void 0:s.startEditable)||e.call(s,t.id)},children:"\u7f16\u8f91"},"editable"),At("\u5206\u914d\u529f\u80fd",t),u.exports.jsx(V,{title:"\u662f\u5426\u5220\u9664\u6b64\u6a21\u5757?",onConfirm:async()=>{await yt({id:t.id}),(null==s?void 0:s.reset)&&(null==s||s.reset())},okText:"\u662f",cancelText:"\u5426",children:u.exports.jsx("a",{children:"\u5220\u9664"})},"delete")]}];var Ut,Ft,Kt,zt;const Bt=(e,t=[])=>(e&&e.forEach((e=>{e.children?Bt(e.children,t):t.push(e.id)})),t),Dt=(e,t=[])=>(e&&e.forEach((e=>{t.push(e.id),e.children&&Dt(e.children,t)})),t),Ht=(e,t=[])=>(e&&e.forEach((e=>{e.resources?Ht(e.resources,t):t.push(e.id)})),t);function Vt(){const e=j(),[t,r]=d.exports.useState(!1),[s,o]=d.exports.useState([]),[n,a]=d.exports.useState([]),[c,p]=d.exports.useState([]),[m,x]=d.exports.useState(!0),[h,f]=d.exports.useState(!0),[g,y]=d.exports.useState([]),[w,v]=d.exports.useState([]),{id:b}=W(),{data:C,loading:k}=ke(It,{manual:!1}),{data:I,loading:_}=ke(jt,{manual:!1}),{data:S}=ke((()=>bt({id:b})),{manual:!1}),{loading:P,request:N}=ke(Nt),E=(e,t)=>{o([...e]),a([...e,...t.halfCheckedKeys]),x(!1)},O=e=>{p([...e]),f(!1)},T=async()=>{const e=n.map((e=>({roleId:b,menuId:e})));await N({roleMenuList:e,roleId:b}),q.success("\u83dc\u5355\u6743\u9650\u5206\u914d\u6210\u529f"),x(!0)},L=async()=>{const e=c.filter((e=>"number"==typeof e&&!isNaN(e))).map((e=>({roleId:b,resourceId:e})));await Et({roleResourceList:e,roleId:b}),q.success("\u63a5\u53e3\u6743\u9650\u5206\u914d\u6210\u529f"),f(!0)},M=()=>{const e=C.map((e=>e.id));o(e),a(Dt(C)),x(!1)},A=()=>{const e=Ht(I);p(e),f(!1)},$=()=>{0===g.length?y(I.map((e=>`_${e.id}`))):y([])},F=()=>{0===w.length?v(C.map((e=>e.id))):v([])};return d.exports.useEffect((()=>{if(S){const{currentRoleMenuList:e,currentRoleResourceList:t}=S,r=Bt(e),s=t.map((e=>e.id));o(r),p(s)}}),[S]),u.exports.jsx(Y,{onResize:e=>{r(e.width<596)},children:u.exports.jsxs(Q,{title:u.exports.jsxs("span",{onClick:e.goBack,className:"c-title-x",children:[u.exports.jsx(G,{}),u.exports.jsx("span",{className:"c-title",children:"\u6743\u9650\u5206\u914d"})]}),split:t?"horizontal":"vertical",bordered:!0,headerBordered:!0,className:"main-card",loading:k,children:[u.exports.jsx(Q,{title:"\u83dc\u5355\u6743\u9650",extra:u.exports.jsxs(R,{size:20,children:[u.exports.jsx("a",{onClick:F,children:(0===w.length?"\u5c55\u5f00":"\u6536\u8d77")+"\u5168\u90e8"}),u.exports.jsx("a",{onClick:M,children:"\u5168\u9009"}),u.exports.jsx(U,{type:"primary",onClick:T,loading:P,disabled:m,children:"\u4fdd\u5b58"})]}),children:u.exports.jsx(X,{checkable:!0,selectable:!1,onCheck:E,treeData:C,checkedKeys:s,autoExpandParent:!0,expandedKeys:w,onExpand:e=>v(e),fieldNames:{title:"name",key:"id"}})}),u.exports.jsx(Q,{title:"\u63a5\u53e3\u6743\u9650",loading:_,extra:u.exports.jsxs(R,{size:20,children:[u.exports.jsx("a",{onClick:$,children:(0===g.length?"\u5c55\u5f00":"\u6536\u8d77")+"\u5168\u90e8"}),u.exports.jsx("a",{onClick:A,children:"\u5168\u9009"}),u.exports.jsx(U,{type:"primary",onClick:L,loading:_,disabled:h,children:"\u4fdd\u5b58"})]}),children:u.exports.jsx(X,{checkable:!0,selectable:!1,checkedKeys:c,expandedKeys:g,onCheck:O,onExpand:e=>y(e),treeData:null==I?void 0:I.map((e=>l(i({},e),{id:`_${e.id}`}))),fieldNames:{key:"id",children:"resources"},titleRender:e=>e.moduleName?e.moduleName:`\u3010${e.resourceName}\u3011${e.resourceUrl}`})})]})},"main-card")}var Wt;const Gt=[{path:"/login",component:xt},{path:"/",component:We,children:[{path:"/home",component:Ge},{path:"/system",children:[{path:"/user",component:()=>{const e=d.exports.useRef(),[t,r]=d.exports.useState([]),s=[{title:"\u7528\u6237\u540d\u79f0",dataIndex:"userName",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]})},{title:"\u8d26\u53f7",dataIndex:"account",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"},{pattern:/^[a-zA-Z0-9_-]{3,16}$/,message:"\u7528\u6237\u540d\u683c\u5f0f\u4e0d\u6b63\u786e"}]})},{title:"\u89d2\u8272",dataIndex:"roleIds",valueType:"select",search:!1,request:async()=>{const e=undefined;return(await bt()).map((e=>({value:e.id,label:e.roleName})))},fieldProps:{mode:"multiple"},formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]}),render:(e,t)=>{var r;return null==(r=t.roles)?void 0:r.map((e=>e.roleName)).join()}},{title:"\u7528\u6237\u72b6\u6001",dataIndex:"status",search:!1,valueEnum:{0:{text:"\u505c\u7528",status:"Error"},1:{text:"\u6b63\u5e38",status:"Success"}}},{title:"\u64cd\u4f5c",valueType:"option",dataIndex:"option",width:250,render:(e,t,r,s)=>[u.exports.jsx("a",{onClick:()=>{var e;null==(e=null==s?void 0:s.startEditable)||e.call(s,t.id)},children:"\u7f16\u8f91"},"editable"),u.exports.jsx(V,{title:"\u662f\u5426\u91cd\u7f6e\u6b64\u7528\u6237\u5bc6\u7801?",onConfirm:async()=>{await Mt({userId:t.id}),q.success("\u5bc6\u7801\u5df2\u91cd\u7f6e")},okText:"\u662f",cancelText:"\u5426",children:u.exports.jsx("a",{onClick:async()=>{},children:"\u91cd\u7f6e\u5bc6\u7801"})},"reset"),1===t.id?"":u.exports.jsx(V,{title:"\u662f\u5426\u5220\u9664\u6b64\u7528\u6237?",onConfirm:async()=>{await Lt({userId:t.id}),(null==s?void 0:s.reset)&&(null==s||s.reset())},okText:"\u662f",cancelText:"\u5426",children:u.exports.jsx("a",{children:"\u5220\u9664"})},"delete")]}],o=()=>{var t;null==(t=e.current)||t.addEditRecord({id:Date.now(),moduleName:"",status:"1",isCreate:!0})};return u.exports.jsx(H,{columns:s,actionRef:e,recordCreatorProps:!1,request:async e=>{const{current:t,pageSize:r,userName:s,account:o}=e,{records:n,total:a}=await qt({currentPage:t,pageSize:r,userName:s,account:o});return{data:n.map((e=>l(i({},e),{roleIds:e.roles.map((e=>e.id))}))),success:!0,total:a}},editable:{editableKeys:t,onSave:async(t,r)=>{var s,o,n;const{userName:a,status:i,isCreate:l,id:c,account:d,roleIds:u}=r,p=l?"\u65b0\u589e":"\u7f16\u8f91",m=u.map((e=>({id:e}))),x=`${d}123`;l?(await Ot({userName:a,status:i,account:d,password:x,roles:m}),(null==(s=e.current)?void 0:s.reset)&&(null==(o=e.current)||o.reset())):(await Tt({id:c,userName:a,status:i,account:d,roles:m}),null==(n=e.current)||n.reload()),q.success(`${p}\u6210\u529f`)},onChange:r,actionRender:(e,t,r)=>[r.save,r.cancel]},search:{labelWidth:"auto"},pagination:{pageSize:10,hideOnSinglePage:!0},rowKey:e=>e.id,options:!1,headerTitle:"\u7528\u6237\u7ba1\u7406",toolBarRender:()=>[u.exports.jsx(U,{icon:u.exports.jsx(Z,{}),type:"primary",onClick:o,children:"\u65b0\u589e\u7528\u6237"},"button")]})},exact:!0},{path:"/menuManage",component:()=>{const[e,t]=d.exports.useState((()=>[])),[r,s]=d.exports.useState({name:"",url:"",icon:""}),[o,n]=d.exports.useState([]),a=d.exports.useRef(),c=d.exports.useRef(),p=()=>({parentId:0,name:"",url:"",icon:"",isCreate:!0,id:Date.now(),key:Date.now()}),m=[{title:"\u83dc\u5355\u540d\u79f0",dataIndex:"name",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]})},{title:"URL",dataIndex:"url",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]})},{title:"\u56fe\u6807",dataIndex:"icon"},{title:"\u64cd\u4f5c",valueType:"option",width:200,render:(t,r,s,o)=>[u.exports.jsx("a",{onClick:()=>{null==o||o.addEditRecord(l(i({},p()),{parentId:r.id}),{parentKey:r.key,newRecordType:"dataSource"}),n([...e,r.key])},children:"\u65b0\u589e\u5b50\u83dc\u5355"},"create"),u.exports.jsx("a",{onClick:()=>{var e;null==(e=null==o?void 0:o.startEditable)||e.call(o,r.key)},children:"\u7f16\u8f91"},"editable"),u.exports.jsx(V,{title:"\u662f\u5426\u5220\u9664\u6b64\u83dc\u5355?",onConfirm:async()=>{var e;await St({ids:null==(e=r.id)?void 0:e.toString()}),null==o||o.reload(!0)},okText:"\u662f",cancelText:"\u5426",children:u.exports.jsx("a",{children:"\u5220\u9664"})},"delete")]}],{request:x}=ke(_t),{request:h}=ke(Rt);return u.exports.jsx(ee,{formRef:c,submitter:!1,className:"form-x",children:u.exports.jsx(H,{rowKey:e=>e.key,headerTitle:"\u83dc\u5355\u7ba1\u7406",actionRef:a,name:"table",expandable:{expandedRowKeys:o,onExpand:(e,t)=>{n(e?[...o,t.key]:o.filter((e=>e!==t.key)))}},request:async()=>{const e=undefined;return{data:await It(),success:!0}},recordCreatorProps:{record:p,creatorButtonText:"\u65b0\u589e\u76ee\u5f55\u83dc\u5355"},columns:m,editable:{editableKeys:e,actionRender:(e,t,r)=>[r.save,r.cancel],onSave:async(e,t)=>{var s;const{icon:o,name:n,url:i}=r,{isCreate:l,id:c,parentId:d}=t;l?await h({sysMenuList:[{icon:o,name:n,url:i,parentId:d}]}):await x({icon:o,id:c,name:n,url:i});const u=l?"\u65b0\u589e":"\u7f16\u8f91";q.success(`${u}\u6210\u529f`),null==(s=a.current)||s.reload(!0)},onChange:t,onValuesChange:e=>{s(e)}}})})}},{path:"/role",component:()=>{const e=d.exports.useRef(),[t]=F.useForm(),r=()=>{var t;null==(t=e.current)||t.addEditRecord({id:(1e6*Math.random()).toFixed(0),roleKey:"ROLE_",roleName:"",remark:"",status:"1",isCreate:!0})},{request:s}=ke(Ct),{request:o}=ke(kt,{onSuccess:()=>{var t;q.success("\u5220\u9664\u6210\u529f"),null==(t=e.current)||t.reload(!0)}}),n=[{title:"\u6743\u9650\u6807\u8bc6",dataIndex:"roleKey",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"},{pattern:/^ROLE_[a-zA-Z0-9]+$/,message:"\u6743\u9650\u6807\u8bc6\u53ea\u80fd\u662f\u7531 ROLE_ \u5f00\u5934\u7684\u82f1\u6587\u6216\u6570\u5b57\u5b57\u7b26"}]})},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]})},{title:"\u89d2\u8272\u72b6\u6001",dataIndex:"status",search:!1,valueEnum:{0:{text:"\u505c\u7528",status:"Error"},1:{text:"\u6b63\u5e38",status:"Success"}}},{title:"\u64cd\u4f5c",valueType:"option",render:(e,t,r,s)=>[u.exports.jsx("a",{onClick:()=>{var e;null==(e=null==s?void 0:s.startEditable)||e.call(s,t.id)},children:"\u7f16\u8f91"},"editable"),u.exports.jsx(V,{title:"\u662f\u5426\u5220\u9664\u6b64\u89d2\u8272?",onConfirm:()=>o({id:t.id}),okText:"\u662f",cancelText:"\u5426",children:u.exports.jsx("a",{children:"\u5220\u9664"})},"del"),u.exports.jsx(A,{to:`/system/role/${t.id}`,children:"\u5206\u914d\u6743\u9650"},"disturb")]}];return u.exports.jsx(J,{columns:n,actionRef:e,request:async()=>{const e=undefined;return{data:await bt(),success:!0}},rowKey:"id",search:!1,dateFormatter:"string",options:!1,headerTitle:"\u89d2\u8272\u7ba1\u7406",editable:{form:t,onSave:async(t,r)=>{var o;const{roleKey:n,roleName:a,isCreate:i,id:l,status:c}=r,d={roleKey:n,roleName:a,status:c};!i&&Object.assign(d,{id:l});const u=i?"\u65b0\u589e":"\u7f16\u8f91";await s(d),q.success(`${u}\u6210\u529f`),null==(o=e.current)||o.reload(!0)},actionRender:(e,t,r)=>[r.save,r.cancel]},pagination:{pageSize:10,hideOnSinglePage:!0},toolBarRender:()=>[u.exports.jsx(U,{icon:u.exports.jsx(Z,{}),type:"primary",onClick:r,children:"\u65b0\u589e\u89d2\u8272"},"button")]})},exact:!0},{path:"/role/:id",component:Vt,exact:!0},{path:"/auth",component:()=>{const e=d.exports.useRef(),[t,r]=d.exports.useState([]);return u.exports.jsx(H,{columns:$t,actionRef:e,recordCreatorProps:{record:()=>({id:Date.now(),moduleName:"",status:"1",isCreate:!0}),creatorButtonText:"\u65b0\u589e\u6a21\u5757"},request:async e=>{const{moduleName:t}=e,r=undefined;return{data:await ft({moduleName:t}),success:!0}},editable:{editableKeys:t,onSave:async(t,r)=>{var s,o,n;const{moduleName:a,status:i,isCreate:l,id:c}=r,d=l?"\u65b0\u589e":"\u7f16\u8f91";l?(await gt({moduleName:a,status:i}),(null==(s=e.current)?void 0:s.reset)&&(null==(o=e.current)||o.reset())):(await gt({id:c,moduleName:a,status:i}),null==(n=e.current)||n.reload()),q.success(`${d}\u6210\u529f`)},onChange:r,actionRender:(e,t,r)=>[r.save,r.cancel]},search:{labelWidth:"auto"},rowKey:e=>e.id,pagination:!1,options:!1,headerTitle:"\u6743\u9650\u7ba1\u7406"})},exact:!0},{path:"/auth/:id",component:()=>{var e;const[t,r]=d.exports.useState((()=>[])),{id:s}=W(),{moduleName:o}=K(),n=d.exports.useRef(),a=[{title:"\u529f\u80fd\u540d\u79f0",dataIndex:"resourceName"},{title:"URL",dataIndex:"resourceUrl",formItemProps:()=>({rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879"}]})},{title:"\u72b6\u6001",key:"status",dataIndex:"status",valueType:"select",valueEnum:{0:{text:"\u505c\u7528",status:"Error"},1:{text:"\u6b63\u5e38",status:"Success"}}},{title:"\u64cd\u4f5c",valueType:"option",width:200,render:(e,t,r,o)=>[u.exports.jsx("a",{onClick:()=>{var e;null==(e=null==o?void 0:o.startEditable)||e.call(o,t.id)},children:"\u7f16\u8f91"},"editable"),u.exports.jsx(V,{title:"\u662f\u5426\u5220\u9664\u6b64\u6a21\u5757?",onConfirm:async()=>{await Pt({resourceId:t.id,moduleId:s}),null==o||o.reload()},okText:"\u662f",cancelText:"\u5426",children:u.exports.jsx("a",{children:"\u5220\u9664"})},"delete")]}];return u.exports.jsx(H,{rowKey:e=>e.id,actionRef:n,headerTitle:u.exports.jsxs("span",{className:"c-title-x",onClick:null==(e=g)?void 0:e.goBack,children:[u.exports.jsx(G,{}),u.exports.jsx("span",{className:"c-title",children:o})]}),recordCreatorProps:{record:{id:Date.now(),resourceName:"",resourceUrl:"",status:"1",isCreate:!0}},request:async()=>{const e=undefined;return{data:await jt({moduleId:s}),success:!0}},columns:a,editable:{type:"multiple",editableKeys:t,onChange:r,onSave:async(e,t)=>{var r;const{id:o,resourceName:a,resourceUrl:i,status:l,isCreate:c}=t,d=c?"\u65b0\u589e":"\u7f16\u8f91";c?await wt({resourceName:a,resourceUrl:i,moduleId:s,status:l}):await vt({resourceName:a,resourceUrl:i,moduleId:s,status:l,id:o}),q.success(`${d}\u6210\u529f`),null==(r=n.current)||r.reload()}}})},exact:!0},{path:"",redirect:"/system/user"}]},{path:"/403",component:()=>u.exports.jsx($,{status:"403",title:"403",subTitle:"Sorry, you don't have access to this page.",extra:u.exports.jsx(U,{type:"primary",onClick:()=>{var e;return null==(e=g)?void 0:e.push("/")},children:"Back Home"})})},{path:"",redirect:"/home"},{component:()=>u.exports.jsx($,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:u.exports.jsx(U,{type:"primary",onClick:()=>{var e;return null==(e=g)?void 0:e.push("/")},children:"Back Home"})})}]}];function Zt(e,t){return(t||[]).reduce(((e,t)=>{const r=t(e);return e.pageConfig&&(r.pageConfig=e.pageConfig),e.getInitialProps&&(r.getInitialProps=e.getInitialProps),r}),e)}function Jt(e,t){t&&["pageConfig","getInitialProps"].forEach((r=>{Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))}function Yt(e,t,r,s){const{__LAZY__:o,dynamicImport:n,__LOADABLE__:a}=e||{};return a?oe(n,{resolveComponent:e=>{const s=e.default;return Jt(s,r),Zt(s,t)},fallback:s}):o?d.exports.lazy((()=>n().then((e=>{if(t&&t.length){const s=e.default;return Jt(s,r),l(i({},e),{default:Zt(s,t)})}return e})))):(Jt(e,r),Zt(e,t))}function Qt(e,t){return e.map((e=>{const r=e,{children:s,component:o,routeWrappers:n,wrappers:a}=r,l=c(r,["children","component","routeWrappers","wrappers"]);let d=s?[]:n;a&&a.length&&(d=d.concat(a));const u=i({},l);return o&&(u.component=Yt(o,d,e,t)),s&&(u.children=Qt(s,t)),u}))}function Xt(e){const t=e,{type:r,children:s}=t,o=c(t,["type","children"]);let n=s;if(!n&&e.routes){const t=Qt(e.routes,e.fallback);n=u.exports.jsx(er,{routes:t,fallback:e.fallback})}return"static"===r?u.exports.jsx(ne,l(i({},o),{children:n})):u.exports.jsx(ae,l(i({},o),{children:n}))}function er({routes:e,fallback:t}){return u.exports.jsx(te,{children:e.map(((e,r)=>{const{children:s}=e;if(s){const s=e,{component:o,children:n}=s,a=c(s,["component","children"]),d=u.exports.jsx(er,{routes:n,fallback:t}),p=e=>o?u.exports.jsx(o,l(i({},e),{children:d})):d;return u.exports.jsx(se,l(i({},a),{render:p}),r)}if(e.redirect){const t=e,{redirect:s}=t,o=c(t,["redirect"]);return u.exports.jsx(re,i({from:e.path,to:s},o),r)}{const s=e,{component:o}=s,n=c(s,["component"]);if(o){const e=window.__ICE_SSR_ENABLED__?e=>u.exports.jsx(o,i({},e)):e=>u.exports.jsx(d.exports.Suspense,{fallback:t||u.exports.jsx("div",{children:"loading"}),children:u.exports.jsx(o,i({},e))});return u.exports.jsx(se,l(i({},n),{render:e}),r)}return console.error("[Router] component is required when config routes"),null}}))})}function tr(...e){if(0===e.length)return"";const t=[],r=e.filter((e=>""!==e));return r.forEach(((e,s)=>{if("string"!=typeof e)throw new Error(`Path must be a string. Received ${e}`);let o=e;s>0&&(o=o.replace(/^[/]+/,"")),o=s<r.length-1?o.replace(/[/]+$/,""):o.replace(/[/]+$/,"/"),t.push(o)})),t.join("/")}function rr(e,t){return e.map((e=>{const r={};if(e.path){const s=tr(t||"",e.path);r.path="/"===s?"/":s.replace(/\/$/,"")}if(e.children)r.children=rr(e.children,r.path||e.path);else if(e.component){const t=e.component;t.pageConfig=Object.assign({},t.pageConfig,{componentName:t.name})}return i(i({},e),r)}))}const sr=({setRenderApp:e,appConfig:t,modifyRoutes:r,modifyRoutesComponent:s,buildConfig:o,context:n,applyRuntimeAPI:a})=>{const{router:d={}}=t;r((()=>rr(d.routes||Gt,""))),s((()=>er)),d.modifyRoutes&&r(d.modifyRoutes);const p=o&&o.router&&o.router.lazy,m=undefined;e(((e,t,r={})=>()=>{let s=i(l(i({},d),{lazy:p}),r);s.history||(s.history=a("createHistory",{type:d.type,basename:d.basename}));const o=s,{fallback:n}=o,m=c(o,["fallback"]);return u.exports.jsx(Xt,l(i({},m),{children:t?u.exports.jsx(t,{routes:Qt(e,n),fallback:n}):null}))}))};var or=({addProvider:e,appConfig:t,context:{initialData:r={},createElement:s}})=>{const o=({children:e})=>{const o=t.store||{};let n={};return r.initialStates?n=r.initialStates:o.initialStates&&(n=o.initialStates),s(Be.Provider,{initialStates:n,children:e})};Be&&Object.prototype.hasOwnProperty.call(Be,"Provider")&&e(o)};const nr=e=>t=>{const{pageConfig:r={}}=t,s=undefined;return s=>{const[o]=je(),n=r.auth;if(n&&!Array.isArray(n))throw new Error("pageConfig.auth must be an array");const a=undefined;return!Array.isArray(n)||!n.length||Object.keys(o).filter((e=>!!n.includes(e)&&o[e])).length?u.exports.jsx(t,i({},s)):e.NoAuthFallback?"function"==typeof e.NoAuthFallback?u.exports.jsx(e.NoAuthFallback,i({},Object.assign({},s,{pageConfig:r}))):e.NoAuthFallback:u.exports.jsx(u.exports.Fragment,{children:"No Auth"})}};var ar=({context:e,appConfig:t,addProvider:r,wrapperPageComponent:s})=>{const o=undefined,n=(e&&e.initialData?e.initialData:{}).auth||{},a=t.auth||{},i=undefined;r((({children:e})=>u.exports.jsx(ye,{value:n,children:e}))),s(nr(a))};function ir(e){e.loadModule(Oe),e.loadModule(sr),e.loadModule(or),e.loadModule(ar)}const lr={mpa:!1,icestarkType:"es"},cr={enableRouter:!0},dr=ie({loadRuntimeModules:ir,createElement:d.exports.createElement,runtimeAPI:{createHistory:le,getSearchParams:K},runtimeValue:cr});function ur(e){qe(e),ce&&ce(e),de({appConfig:e,buildConfig:lr,ErrorBoundary:Se,appLifecycle:{createBaseApp:dr,initAppLifeCycles:ue,emitLifeCycles:pe}})}const pr={400:"\u9519\u8bef\u7684\u8bf7\u6c42",401:"\u8bf7\u91cd\u65b0\u767b\u5f55",403:"\u65e0\u6743\u8bbf\u95ee",404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002",502:"\u7f51\u5173\u9519\u8bef\u3002",503:"\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u670d\u52a1\u5668\u6682\u65f6\u8fc7\u8f7d\u6216\u7ef4\u62a4\u3002",504:"\u7f51\u5173\u8d85\u65f6\u3002"},mr=undefined;ur({app:{rootId:"ice-container"},router:{type:"hash"},request:[{baseURL:fe.baseURL,interceptors:{request:{onConfig:e=>{var t,r;const s=localStorage.getItem("jwt");return"/login"!==(null==(t=g)?void 0:t.location.pathname)&&(s?Object.assign(e.headers,{jwt:s}):null==(r=g)||r.push("/login")),e},onError:e=>Promise.reject(e)},response:{onConfig:e=>0!==(null==e?void 0:e.data.code)?(q.error(e.data.msg||"\u8bf7\u6c42\u9519\u8bef"),Promise.reject(e)):null==e?void 0:e.data,onError:e=>{var t,r,s;const{status:o}=(null==e?void 0:e.response)||{},n=o?pr[o]:"\u8bf7\u6c42\u9519\u8bef";return q.destroy(),q.error(n),401===o&&(null==(r=g)||r.replace({pathname:"/login",search:`redirect=${null==(t=g)?void 0:t.location.pathname}`})),403===o&&(null==(s=g)||s.push({pathname:"/403"})),Promise.reject(e)}}}},{instanceName:"loginRequest",baseURL:fe.baseURL,interceptors:{request:{onConfig:e=>{var t,r;const s=localStorage.getItem("jwt");return"/login"!==(null==(t=g)?void 0:t.location.pathname)&&(s?Object.assign(e.headers,{jwt:s}):null==(r=g)||r.push("/login")),e},onError:e=>Promise.reject(e)},response:{onConfig:e=>(0!==(null==e?void 0:e.data.code)&&q.error(e.data.msg||"\u8bf7\u6c42\u9519\u8bef"),e),onError:e=>{var t,r;const{status:s}=(null==e?void 0:e.response)||{},o=s?pr[s]:"\u8bf7\u6c42\u9519\u8bef";return q.destroy(),q.error(o),401===s&&(null==(r=g)||r.replace({pathname:"/login",search:`redirect=${null==(t=g)?void 0:t.location.pathname}`})),Promise.reject(e)}}}}]});
